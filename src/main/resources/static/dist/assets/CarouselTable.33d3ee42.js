import{z as e,A as l,B as a,p as t,a as o,L as r,r as d,o as i,c as s,f as n,w as u,h as c}from"./vendor.a8d67b6f.js";import{s as p}from"./request.7ef930c0.js";const m={name:"carouseltable",methods:{handleAvatarError(l){e.error(l)},handleAvatarSuccess(l){l.isSuccess,e.error(l.error)},handleAvatarBeforeUpload:e=>!0,uploadSectionFile(l){let a=new FormData;a.append("file",l.file),a.append("dataid","11111"),p({url:"/uploadFile",method:"post",data:a}).then((l=>{if(200===l.status){e.success("上传成功");let a=l.data.url;console.log(a),this.form.picurl=a}else e.error(l.msg||"上传失败")}),(l=>{e.error("文件上传失败")}))}},setup(){const t=l({keyword:"",pageIndex:1,pageSize:10}),o=a([]),d=a(0),i=()=>{p({url:"/carousel/apilist",method:"get",params:t}).then((e=>{o.value=e.data.list,d.value=e.data.pageTotal||10}))};i();let s=l({id:"",name:"",picurl:""});const n=()=>{Object.keys(s).forEach((e=>s[e]="")),console.log("clear")},u=a(!1),c=a(!1);return{query:t,tableData:o,pageTotal:d,editVisible:u,form:s,handleSearch:()=>{t.pageIndex=1,i()},handlePageChange:e=>{t.pageIndex=e,i()},handleDelete:(l,a)=>{r.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{p({url:"/carousel/apidelete",method:"get",params:{id:a.id}}).then((l=>{200===l.status?(e.success("删除成功"),i()):e.error(l.msg||"删除失败")}))})).catch((()=>{}))},handleEdit:(e,l)=>{Object.keys(s).forEach((e=>{s[e]=l[e]})),u.value=!0},saveEdit:()=>{u.value=!1,p({url:"/carousel/apiupdate",method:"get",params:s}).then((l=>{200===l.status?(e.success("修改数据成功"),i(),n()):e.error(l.msg||"修改数据失败")}))},addVisible:c,handleAdd:()=>{n(),c.value=!0},saveInsert:()=>{c.value=!1,p({url:"/carousel/apiinsert",method:"get",params:s}).then((l=>{200===l.status?(e.success("添加数据成功"),i()):e.error(l.msg||"添加数据失败")}))}}}},h=u();t("data-v-73c20d05");const f={class:"container"},b={class:"handle-box"},g=c("搜索"),y=c("添加"),V=c("编辑 "),v=c("删除 "),_={class:"pagination"},k=c("选择文件"),w={class:"dialog-footer"},x=c("取 消"),C=c("确 定"),z=c("选择文件"),A={class:"dialog-footer"},S=c("取 消"),U=c("确 定");o();const q=h(((e,l,a,t,o,r)=>{const u=d("el-input"),c=d("el-button"),p=d("el-table-column"),m=d("el-image"),q=d("el-table"),E=d("el-pagination"),I=d("el-form-item"),D=d("el-upload"),F=d("el-form"),j=d("el-dialog");return i(),s("div",null,[n("div",f,[n("div",b,[n(u,{modelValue:t.query.keyword,"onUpdate:modelValue":l[1]||(l[1]=e=>t.query.keyword=e),placeholder:"搜索内容",size:"mini",style:{width:"15%","min-width":"100px"},class:"handle-input mr10"},null,8,["modelValue"]),n(c,{type:"primary",icon:"el-icon-search",size:"mini",onClick:t.handleSearch},{default:h((()=>[g])),_:1},8,["onClick"]),n(c,{type:"primary",icon:"el-icon-plus",size:"mini",onClick:t.handleAdd},{default:h((()=>[y])),_:1},8,["onClick"])]),n(q,{data:t.tableData,size:"mini",border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:h((()=>[n(p,{prop:"id",label:"编号"}),n(p,{prop:"name",label:"名称"}),n(p,{label:"图片(查看大图)",align:"center"},{default:h((e=>[n(m,{class:"table-td-thumb",src:e.row.picurl,"preview-src-list":[e.row.picurl]},null,8,["src","preview-src-list"])])),_:1}),n(p,{label:"操作",width:"180",align:"center"},{default:h((e=>[n(c,{type:"text",icon:"el-icon-edit",onClick:l=>t.handleEdit(e.$index,e.row)},{default:h((()=>[V])),_:2},1032,["onClick"]),n(c,{type:"text",icon:"el-icon-delete",class:"red",onClick:l=>t.handleDelete(e.$index,e.row)},{default:h((()=>[v])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n("div",_,[n(E,{background:"",layout:"total, prev, pager, next","current-page":t.query.pageIndex,"page-size":t.query.pageSize,total:t.pageTotal,onCurrentChange:t.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),n(j,{title:"添加",modelValue:t.addVisible,"onUpdate:modelValue":l[5]||(l[5]=e=>t.addVisible=e),width:"45%"},{footer:h((()=>[n("span",w,[n(c,{size:"small",onClick:l[4]||(l[4]=e=>t.addVisible=!1)},{default:h((()=>[x])),_:1}),n(c,{size:"small",type:"primary",onClick:t.saveInsert},{default:h((()=>[C])),_:1},8,["onClick"])])])),default:h((()=>[n(F,{size:"small","label-width":"100px"},{default:h((()=>[n(I,{label:"名称:"},{default:h((()=>[n(u,{placeholder:"请输入名称",modelValue:t.form.name,"onUpdate:modelValue":l[2]||(l[2]=e=>t.form.name=e)},null,8,["modelValue"])])),_:1}),n(I,{label:"图片:"},{default:h((()=>[n(u,{placeholder:"请输入图片",style:{width:"80%",display:"inline-block"},modelValue:t.form.picurl,"onUpdate:modelValue":l[3]||(l[3]=e=>t.form.picurl=e)},null,8,["modelValue"]),n(D,{action:"","show-file-list":!1,"on-error":r.handleAvatarError,"on-success":r.handleAvatarSuccess,"before-upload":r.handleAvatarBeforeUpload,"http-request":r.uploadSectionFile,style:{display:"inline-block"}},{default:h((()=>[n(c,{type:"primary",style:{margin:"0px",padding:"0px 8px"}},{default:h((()=>[k])),_:1})])),_:1},8,["on-error","on-success","before-upload","http-request"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),n(j,{title:"编辑",modelValue:t.editVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>t.editVisible=e),width:"45%"},{footer:h((()=>[n("span",A,[n(c,{size:"small",onClick:l[9]||(l[9]=e=>t.editVisible=!1)},{default:h((()=>[S])),_:1}),n(c,{size:"small",type:"primary",onClick:t.saveEdit},{default:h((()=>[U])),_:1},8,["onClick"])])])),default:h((()=>[n(F,{size:"small","label-width":"100px"},{default:h((()=>[n(I,{label:"编号:"},{default:h((()=>[n(u,{placeholder:"请输入编号",disabled:!0,modelValue:t.form.id,"onUpdate:modelValue":l[6]||(l[6]=e=>t.form.id=e)},null,8,["modelValue"])])),_:1}),n(I,{label:"名称:"},{default:h((()=>[n(u,{placeholder:"请输入名称",modelValue:t.form.name,"onUpdate:modelValue":l[7]||(l[7]=e=>t.form.name=e)},null,8,["modelValue"])])),_:1}),n(I,{label:"图片:"},{default:h((()=>[n(u,{placeholder:"请输入图片",style:{width:"80%",display:"inline-block"},modelValue:t.form.picurl,"onUpdate:modelValue":l[8]||(l[8]=e=>t.form.picurl=e)},null,8,["modelValue"]),n(D,{action:"","show-file-list":!1,"on-error":r.handleAvatarError,"on-success":r.handleAvatarSuccess,"before-upload":r.handleAvatarBeforeUpload,"http-request":r.uploadSectionFile,style:{display:"inline-block"}},{default:h((()=>[n(c,{type:"primary",style:{margin:"0px",padding:"0px 8px"}},{default:h((()=>[z])),_:1})])),_:1},8,["on-error","on-success","before-upload","http-request"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}));m.render=q,m.__scopeId="data-v-73c20d05";export default m;
