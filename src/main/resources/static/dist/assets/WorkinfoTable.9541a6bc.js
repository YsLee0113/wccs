import{A as e,B as l,p as a,a as o,L as d,z as t,r as n,o as i,c as r,f as u,w as s,h as m}from"./vendor.a8d67b6f.js";import{s as p}from"./request.7ef930c0.js";const c={name:"workinfotable",setup(){const a=e({keyword:"",pageIndex:1,pageSize:10}),o=l([]),n=l(0),i=()=>{p({url:"/workinfo/apilist",method:"get",params:a}).then((e=>{o.value=e.data.list,n.value=e.data.pageTotal||10}))};i();let r=e({wid:"",wname:"",wcontent:"",wuser:"",waddtime:""});const u=()=>{Object.keys(r).forEach((e=>r[e]="")),console.log("clear")},s=l(!1),m=l(!1);return{query:a,tableData:o,pageTotal:n,editVisible:s,form:r,handleSearch:()=>{a.pageIndex=1,i()},handlePageChange:e=>{a.pageIndex=e,i()},handleDelete:(e,l)=>{d.confirm("确定要删除吗？","提示",{type:"warning"}).then((()=>{p({url:"/workinfo/apidelete",method:"get",params:{id:l.wid}}).then((e=>{200===e.status?(t.success("删除成功"),i()):t.error(e.msg||"删除失败")}))})).catch((()=>{}))},handleEdit:(e,l)=>{Object.keys(r).forEach((e=>{r[e]=l[e]})),s.value=!0},saveEdit:()=>{s.value=!1,p({url:"/workinfo/apiupdate",method:"get",params:r}).then((e=>{200===e.status?(t.success("修改数据成功"),i(),u()):t.error(e.msg||"修改数据失败")}))},addVisible:m,handleAdd:()=>{u(),m.value=!0},saveInsert:()=>{m.value=!1,p({url:"/workinfo/apiinsert",method:"get",params:r}).then((e=>{200===e.status?(t.success("添加数据成功"),i()):t.error(e.msg||"添加数据失败")}))}}}},f=s();a("data-v-27989f19");const h={class:"container"},w={class:"handle-box"},V=m("搜索"),b=m("添加"),g=m("编辑 "),k=m("删除"),_={class:"pagination"},y={class:"dialog-footer"},C=m("取 消"),v=m("确 定"),z={class:"dialog-footer"},x=m("取 消"),U=m("确 定");o();const I=f(((e,l,a,o,d,t)=>{const s=n("el-input"),m=n("el-button"),p=n("el-table-column"),c=n("el-table"),I=n("el-pagination"),q=n("el-form-item"),E=n("el-form"),j=n("el-dialog");return i(),r("div",null,[u("div",h,[u("div",w,[u(s,{modelValue:o.query.keyword,"onUpdate:modelValue":l[1]||(l[1]=e=>o.query.keyword=e),placeholder:"搜索内容",size:"mini",style:{width:"15%","min-width":"100px"},class:"handle-input mr10"},null,8,["modelValue"]),u(m,{type:"primary",icon:"el-icon-search",size:"mini",onClick:o.handleSearch},{default:f((()=>[V])),_:1},8,["onClick"]),u(m,{type:"primary",icon:"el-icon-plus",size:"mini",onClick:o.handleAdd},{default:f((()=>[b])),_:1},8,["onClick"])]),u(c,{data:o.tableData,size:"mini",border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header"},{default:f((()=>[u(p,{prop:"wid",label:"任务编号"}),u(p,{prop:"wname",label:"任务名称"}),u(p,{prop:"wcontent",label:"任务内容"}),u(p,{prop:"wuser",label:"发布教师"}),u(p,{prop:"waddtime",label:"发布时间"}),u(p,{label:"操作",width:"180",align:"center"},{default:f((e=>[u(m,{type:"text",icon:"el-icon-edit",onClick:l=>o.handleEdit(e.$index,e.row)},{default:f((()=>[g])),_:2},1032,["onClick"]),u(m,{type:"text",icon:"el-icon-delete",class:"red",onClick:l=>o.handleDelete(e.$index,e.row)},{default:f((()=>[k])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),u("div",_,[u(I,{background:"",layout:"total, prev, pager, next","current-page":o.query.pageIndex,"page-size":o.query.pageSize,total:o.pageTotal,onCurrentChange:o.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange"])])]),u(j,{title:"添加",modelValue:o.addVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>o.addVisible=e),width:"30%"},{footer:f((()=>[u("span",y,[u(m,{size:"small",onClick:l[6]||(l[6]=e=>o.addVisible=!1)},{default:f((()=>[C])),_:1}),u(m,{size:"small",type:"primary",onClick:o.saveInsert},{default:f((()=>[v])),_:1},8,["onClick"])])])),default:f((()=>[u(E,{size:"small","label-width":"100px"},{default:f((()=>[u(q,{label:"任务名称:"},{default:f((()=>[u(s,{placeholder:"请输入任务名称",modelValue:o.form.wname,"onUpdate:modelValue":l[2]||(l[2]=e=>o.form.wname=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"任务内容:"},{default:f((()=>[u(s,{placeholder:"请输入任务内容",modelValue:o.form.wcontent,"onUpdate:modelValue":l[3]||(l[3]=e=>o.form.wcontent=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"发布教师:"},{default:f((()=>[u(s,{placeholder:"请输入发布教师",modelValue:o.form.wuser,"onUpdate:modelValue":l[4]||(l[4]=e=>o.form.wuser=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"发布时间:"},{default:f((()=>[u(s,{placeholder:"请输入发布时间",modelValue:o.form.waddtime,"onUpdate:modelValue":l[5]||(l[5]=e=>o.form.waddtime=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),u(j,{title:"编辑",modelValue:o.editVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>o.editVisible=e),width:"30%"},{footer:f((()=>[u("span",z,[u(m,{size:"small",onClick:l[13]||(l[13]=e=>o.editVisible=!1)},{default:f((()=>[x])),_:1}),u(m,{size:"small",type:"primary",onClick:o.saveEdit},{default:f((()=>[U])),_:1},8,["onClick"])])])),default:f((()=>[u(E,{size:"small","label-width":"100px"},{default:f((()=>[u(q,{label:"任务编号:"},{default:f((()=>[u(s,{placeholder:"请输入任务编号",disabled:!0,modelValue:o.form.wid,"onUpdate:modelValue":l[8]||(l[8]=e=>o.form.wid=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"任务名称:"},{default:f((()=>[u(s,{placeholder:"请输入任务名称",modelValue:o.form.wname,"onUpdate:modelValue":l[9]||(l[9]=e=>o.form.wname=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"任务内容:"},{default:f((()=>[u(s,{placeholder:"请输入任务内容",modelValue:o.form.wcontent,"onUpdate:modelValue":l[10]||(l[10]=e=>o.form.wcontent=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"发布教师:"},{default:f((()=>[u(s,{placeholder:"请输入发布教师",modelValue:o.form.wuser,"onUpdate:modelValue":l[11]||(l[11]=e=>o.form.wuser=e)},null,8,["modelValue"])])),_:1}),u(q,{label:"发布时间:"},{default:f((()=>[u(s,{placeholder:"请输入发布时间",modelValue:o.form.waddtime,"onUpdate:modelValue":l[12]||(l[12]=e=>o.form.waddtime=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}));c.render=I,c.__scopeId="data-v-27989f19";export default c;
